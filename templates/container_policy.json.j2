{# Container registry policy file - generated by Ansible #}
{
  "default": [{"type": "reject"}],
  "transports": {
    "docker": {
    {%- if container_registries is defined and container_registries|length > 0 -%}
    {%- for registry in container_registries %}
      "{{ registry }}": [{"type": "insecureAcceptAnything"}]{% if not loop.last %},{% endif %}
    {%- endfor -%}
    {%- else %}
      "registry.example.com": [{"type": "insecureAcceptAnything"}]
    {%- endif %}
    }
  }
}